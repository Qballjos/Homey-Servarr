<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>System Health</title><script src="/lib/homey.js"></script><style>body{margin:0;padding:15px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:0 0;color:#2c3e50}.widget-container{display:flex;flex-direction:column;gap:10px}.app-status{display:flex;align-items:center;gap:12px;padding:10px;background:rgba(255,255,255,.1);border-radius:8px;border:1px solid rgba(0,0,0,.05)}.indicator{width:12px;height:12px;border-radius:50%;flex-shrink:0}.status-ok{background:#27ae60;box-shadow:0 0 8px #27ae60}.status-warning{background:#f1c40f;box-shadow:0 0 8px #f1c40f}.status-error{background:#e74c3c;box-shadow:0 0 8px #e74c3c}.status-disabled{background:#95a5a6}.info{flex:1;display:flex;flex-direction:column}.name{font-weight:600;font-size:14px;text-transform:capitalize}.message{font-size:12px;color:#7f8c8d;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}</style></head><body><div class="widget-container" id="status-list"></div><script>Homey.ready();const listEl=document.getElementById("status-list");function render(e){if(e){listEl.innerHTML="";["radarr","sonarr","lidarr","prowlarr"].forEach(t=>{const n=e[t]||{status:"disabled"},a=document.createElement("div");a.className="app-status";let s="";s="ok"===n.status?"Connected & Healthy":"disabled"===n.status?"Not configured":n.message||"Action required",a.innerHTML=`<div class="indicator status-${n.status}"></div><div class="info"><div class="name">${t}</div><div class="message">${s}</div></div>`,listEl.appendChild(a)})}}async function load(){try{const deviceIds=Homey.getDeviceIds();if(!deviceIds||deviceIds.length===0)return;const result=await Homey.api("GET","/getDeviceData",null);if(result&&result.healthSummary){render(result.healthSummary)}}catch(e){console.error("Error loading health status:",e)}}Homey.on("capability:measure_today_releases",()=>load()),load(),setInterval(load,6e4);</script></body></html>
